<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.mapper.tmm.TMMA0011Mapper">

    <select id="getTmCodexh" parameterType="HashMap" resultType="TmCodexh">
        <![CDATA[ 
      SELECT  row_number() over (order by A.COMM_CODE) AS id
             ,A.COMM_CODE   /*공통코드*/
             ,A.COMM_CDNM   /*공통코드명*/
             ,A.SYST_CODE   /*시스템코드*/
             ,A.CDGB_CODE   /*코드구분코드*/
             ,A.COCD_LNTH   /*세부코드길이*/
             ,A.RE1F_DESC   /*보조1필드설명*/
             ,A.RE1T_CODE   /*보조1필드입력형태코드*/
             ,A.RE1F_CMCD   /*보조1필드공통코드*/
             ,(SELECT B.COMM_CDNM FROM TM_CODEXH B WHERE B.COMM_CODE = A.RE1F_CMCD ) AS RE1F_CMNM	/*보조1필드공통코드명*/
             ,A.RE2F_DESC   /*보조2필드설명*/
             ,A.RE2T_CODE   /*보조2필드입력형태코드*/
             ,A.RE2F_CMCD   /*보조2필드공통코드*/
             ,(SELECT B.COMM_CDNM FROM TM_CODEXH B WHERE B.COMM_CODE = A.RE2F_CMCD ) AS RE2F_CMNM	/*보조2필드공통코드명*/
             ,A.RE3F_DESC   /*보조3필드설명*/
             ,A.RE3T_CODE   /*보조3필드입력형태코드*/
             ,A.RE3F_CMCD   /*보조3필드공통코드*/
             ,(SELECT B.COMM_CDNM FROM TM_CODEXH B WHERE B.COMM_CODE = A.RE3F_CMCD )  AS RE3F_CMNM	/*보조3필드공통코드명*/
             ,A.RE4F_DESC   /*보조4필드설명*/
             ,A.RE4T_CODE   /*보조4필드입력형태코드*/
             ,A.RE4F_CMCD   /*보조4필드공통코드*/
             ,(SELECT B.COMM_CDNM FROM TM_CODEXH B WHERE B.COMM_CODE = A.RE4F_CMCD )  AS RE4F_CMNM	/*보조4필드공통코드명*/
             ,A.RE5F_DESC   /*보조5필드설명*/
             ,A.RE5T_CODE   /*보조5필드입력형태코드*/
             ,A.RE5F_CMCD   /*보조5필드공통코드*/
             ,(SELECT B.COMM_CDNM FROM TM_CODEXH B WHERE B.COMM_CODE = A.RE5F_CMCD )  AS RE5F_CMNM	/*보조5필드공통코드명*/
             ,A.RE6F_DESC   /*보조6필드설명*/
             ,A.RE6T_CODE   /*보조6필드입력형태코드*/
             ,A.RE6F_CMCD   /*보조6필드공통코드*/
             ,(SELECT B.COMM_CDNM FROM TM_CODEXH B WHERE B.COMM_CODE = A.RE6F_CMCD )  AS RE6F_CMNM	/*보조6필드공통코드명*/
             ,A.RE7F_DESC   /*보조7필드설명*/
             ,A.RE7T_CODE   /*보조7필드입력형태코드*/
             ,A.RE7F_CMCD   /*보조7필드공통코드*/
             ,(SELECT B.COMM_CDNM FROM TM_CODEXH B WHERE B.COMM_CODE = A.RE7F_CMCD )  AS RE7F_CMNM	/*보조7필드공통코드명*/
             ,A.RE8F_DESC   /*보조8필드설명*/
             ,A.RE8T_CODE   /*보조8필드입력형태코드*/
             ,A.RE8F_CMCD   /*보조8필드공통코드*/
             ,(SELECT B.COMM_CDNM FROM TM_CODEXH B WHERE B.COMM_CODE = A.RE8F_CMCD )  AS RE8F_CMNM	/*보조8필드공통코드명*/
             ,A.RE9F_DESC   /*보조9필드설명*/
             ,A.RE9T_CODE   /*보조9필드입력형태코드*/
             ,A.RE9F_CMCD   /*보조9필드공통코드*/
             ,(SELECT B.COMM_CDNM FROM TM_CODEXH B WHERE B.COMM_CODE = A.RE9F_CMCD )  AS RE9F_CMNM	/*보조9필드공통코드명*/
             ,A.R10F_DESC   /*보조10필드설명*/
             ,A.R10T_CODE   /*보조10필드입력형태코드*/
             ,A.R10F_CMCD   /*보조10필드공통코드*/
             ,(SELECT B.COMM_CDNM FROM TM_CODEXH B WHERE B.COMM_CODE = A.R10F_CMCD )  AS R10F_CMNM	/*보조10필드공통코드명*/
             ,A.REMK_100X   /*비고100*/
             ,NVL(A.ISET_YSNO, '0') AS ISET_YSNO   /*초기세팅여부*/
        FROM TM_CODEXH A
           WHERE A.COMM_CODE || A.COMM_CDNM LIKE '%' || #{COMM_CDNM} || '%'
    ]]>
        <if test='SYST_CODE != null and SYST_CODE != ""'>
            <![CDATA[
          AND A.SYST_CODE = #{SYST_CODE}
    ]]>
        </if>
        <![CDATA[
           ORDER BY A.COMM_CODE
    ]]>
    </select>

    <select id="SEARCH01" parameterType="hashmap" resultType="hashmap">
        <![CDATA[ 
          SELECT  COMM_CODE   /*공통코드*/
                 ,COMD_CODE   /*세부코드*/
                 ,COMD_CDNM   /*세부코드명*/
                 ,COMD_ENNM   /*세부영문명*/
                 ,CRTE_DATE   /*생성일*/
                 ,WAST_DATE   /*폐기일*/
                 ,REF1_FILD   /*보조1필드*/
                 ,REF2_FILD   /*보조2필드*/
                 ,REF3_FILD   /*보조3필드*/
                 ,REF4_FILD   /*보조4필드*/
                 ,REF5_FILD   /*보조5필드*/
                 ,REF6_FILD   /*보조6필드*/
                 ,REMK_100X   /*비고100*/
                 ,SORT_ORDR   /*정렬순서*/       
            FROM TM_CODEXD
           WHERE COMM_CODE = #{COMM_CODE}
           ORDER BY SORT_ORDR 
     ]]>
    </select>

    <insert id="insert00" parameterType="hashmap">
        <![CDATA[
         INSERT INTO TM_CODEXH (
                COMM_CODE   /*공통코드*/
               ,COMM_CDNM   /*공통코드명*/
               ,SYST_CODE   /*시스템코드*/
               ,CDGB_CODE   /*코드구분코드*/
               ,COCD_LNTH   /*세부코드길이*/
               ,RE1F_DESC   /*보조1필드설명*/
               ,RE2F_DESC   /*보조2필드설명*/
               ,RE3F_DESC   /*보조3필드설명*/
               ,RE4F_DESC   /*보조4필드설명*/
               ,RE5F_DESC   /*보조5필드설명*/
               ,RE6F_DESC   /*보조6필드설명*/
               ,REMK_100X   /*비고100*/
               ,INST_USID   /*입력작업자*/
               ,INST_DATE   /*입력일시*/
               ,UPDT_USID   /*수정작업자*/
               ,UPDT_DATE   /*수정일시*/
       ) VALUES (
                #{COMM_CODE}   /*공통코드*/
               ,#{COMM_CDNM}   /*공통코드명*/
               ,#{SYST_CODE}   /*시스템코드*/
               ,#{CDGB_CODE}   /*코드구분코드*/
               ,#{COCD_LNTH}   /*세부코드길이*/
               ,#{RE1F_DESC}   /*보조1필드설명*/
               ,#{RE2F_DESC}   /*보조2필드설명*/
               ,#{RE3F_DESC}   /*보조3필드설명*/
               ,#{RE4F_DESC}   /*보조4필드설명*/
               ,#{RE5F_DESC}   /*보조5필드설명*/
               ,#{RE6F_DESC}   /*보조6필드설명*/
               ,#{REMK_100X}   /*비고100*/
               ,#{UPDT_USID}   /*입력작업자*/
               ,SYSDATE   /*입력일시*/
               ,#{UPDT_USID}   /*수정작업자*/
               ,SYSDATE   /*수정일시*/
        )
     ]]>
    </insert>

    <insert id="SAVE01" parameterType="hashmap">
        <![CDATA[
         INSERT INTO TM_CODEXD (
                COMM_CODE   /*공통코드*/
               ,COMD_CODE   /*세부코드*/
               ,COMD_CDNM   /*세부코드명*/
               ,COMD_ENNM   /*세부영문명*/
               ,CRTE_DATE   /*생성일*/
               ,WAST_DATE   /*폐기일*/
               ,REF1_FILD   /*보조1필드*/
               ,REF2_FILD   /*보조2필드*/
               ,REF3_FILD   /*보조3필드*/
               ,REF4_FILD   /*보조4필드*/
               ,REF5_FILD   /*보조5필드*/
               ,REF6_FILD   /*보조6필드*/
               ,REMK_100X   /*비고100*/               
               ,SORT_ORDR   /*정렬순서*/
               ,INST_USID   /*입력작업자*/
               ,INST_DATE   /*입력일시*/
               ,UPDT_USID   /*수정작업자*/
               ,UPDT_DATE   /*수정일시*/
       ) VALUES (
                #{COMM_CODE}   /*공통코드*/
               ,#{COMD_CODE}   /*세부코드*/
               ,#{COMD_CDNM}   /*세부코드명*/
               ,#{COMD_ENNM}   /*세부영문명*/
               ,#{CRTE_DATE}   /*생성일*/
               ,#{WAST_DATE}   /*폐기일*/
               ,#{REF1_FILD}   /*보조1필드*/
               ,#{REF2_FILD}   /*보조2필드*/
               ,#{REF3_FILD}   /*보조3필드*/
               ,#{REF4_FILD}   /*보조4필드*/
               ,#{REF5_FILD}   /*보조5필드*/
               ,#{REF6_FILD}   /*보조6필드*/
               ,#{REMK_100X}   /*비고100*/               
               ,#{SORT_ORDR}   /*정렬순서*/
               ,#{UPDT_USID}   /*입력작업자*/
               ,SYSDATE   /*입력일시*/
               ,#{UPDT_USID}   /*수정작업자*/
               ,SYSDATE   /*수정일시*/
        )
     ]]>
    </insert>

    <update id="update00" parameterType="hashmap">
        <![CDATA[
        UPDATE TM_CODEXH
           SET  COMM_CDNM = #{COMM_CDNM}   /*공통코드명*/
               ,SYST_CODE = #{SYST_CODE}   /*시스템코드*/
               ,CDGB_CODE = #{CDGB_CODE}   /*코드구분코드*/
               ,COCD_LNTH = #{COCD_LNTH}   /*세부코드길이*/
               ,RE1F_DESC = #{RE1F_DESC}   /*보조1필드설명*/
               ,RE2F_DESC = #{RE2F_DESC}   /*보조2필드설명*/
               ,RE3F_DESC = #{RE3F_DESC}   /*보조3필드설명*/
               ,RE4F_DESC = #{RE4F_DESC}   /*보조4필드설명*/
               ,RE5F_DESC = #{RE5F_DESC}   /*보조5필드설명*/
               ,RE6F_DESC = #{RE6F_DESC}   /*보조6필드설명*/
               ,REMK_100X = #{REMK_100X}   /*비고100*/
               ,UPDT_USID = #{UPDT_USID}   /*수정작업자*/
               ,UPDT_DATE = SYSDATE   /*수정일시*/
         WHERE COMM_CODE  = #{COMM_CODE}   /*공통코드*/
     ]]>
    </update>

    <update id="UPDATE01" parameterType="hashmap">
        <![CDATA[
        UPDATE TM_CODEXD
           SET  COMD_CDNM = #{COMD_CDNM}   /*세부코드명*/
               ,COMD_ENNM = #{COMD_ENNM}   /*세부영문명*/
               ,CRTE_DATE = #{CRTE_DATE}   /*생성일*/
               ,WAST_DATE = #{WAST_DATE}   /*폐기일*/
               ,REF1_FILD = #{REF1_FILD}   /*보조1필드*/
               ,REF2_FILD = #{REF2_FILD}   /*보조2필드*/
               ,REF3_FILD = #{REF3_FILD}   /*보조3필드*/
               ,REF4_FILD = #{REF4_FILD}   /*보조4필드*/
               ,REF5_FILD = #{REF5_FILD}   /*보조5필드*/
               ,REF6_FILD = #{REF6_FILD}   /*보조6필드*/
               ,REMK_100X = #{REMK_100X}   /*비고100*/               
               ,SORT_ORDR = #{SORT_ORDR}   /*정렬순서*/
               ,UPDT_USID = #{UPDT_USID}   /*수정작업자*/
               ,UPDT_DATE = SYSDATE   /*수정일시*/
         WHERE COMM_CODE  = #{COMM_CODE}   /*공통코드*/
           AND COMD_CODE  = #{COMD_CODE}   /*세부코드*/
     ]]>
    </update>

    <delete id="delete00" parameterType="hashmap">
        <![CDATA[
          
        DELETE FROM TM_CODEXH
         WHERE COMM_CODE = #{COMM_CODE}   /*공통코드*/
        
                   
     ]]>
    </delete>

    <delete id="DELETE01" parameterType="hashmap">
        <![CDATA[
        DELETE FROM TM_CODEXD
         WHERE COMM_CODE = #{COMM_CODE}   /*공통코드*/
           AND COMD_CODE = #{COMD_CODE}   /*세부코드*/
           
              
     ]]>
    </delete>

    <delete id="DELETE02" parameterType="hashmap">
        <![CDATA[
          
        DELETE FROM TM_CODEXD
         WHERE COMM_CODE = #{COMM_CODE}   /*공통코드*/         
                   
     ]]>
    </delete>

</mapper>